<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô MR.2/1 (Final Verified)</title>

<style>
/* ===== ‡∏ü‡∏≠‡∏ô‡∏ï‡πå & ‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå (iOS Style) ===== */
body{ margin:0; padding:20px; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; transition: background .25s, color .25s; }
:root{ --bg:#ffffff; --text:#000; --sub:#555; --card:#f4f4f4; --btn:#ff3b30; --btn-hover:#d63229; --border:#ddd; --warn:#ffcc00; --warn-active:#ff9500; }
.dark{ --bg:#000; --text:#fff; --sub:#aaa; --card:#1c1c1e; --btn:#ff453a; --btn-hover:#ff6961; --border:#333; --warn:#ffd60a; --warn-active:#ff9f0a; }
body{ background:var(--bg); color:var(--text); }

h2{ text-align:center; margin:10px 0 5px; color:var(--btn); font-weight:700; }
#time{ text-align:center; color:var(--sub); font-size:14px; margin-bottom:15px; }
#modeToggle{ position:absolute; top:12px; right:12px; padding:8px; font-size:18px; background:transparent; color:var(--text); border:none; cursor: pointer; }

/* ‡∏õ‡∏∏‡πà‡∏°‡∏ï‡πà‡∏≤‡∏á‡πÜ */
button.main-btn{ width:100%; padding:15px; margin:8px 0; font-size:16px; font-weight:600; border:none; border-radius:12px; background:var(--btn); color:#fff; transition:.2s; box-shadow: 0 2px 5px rgba(0,0,0,0.15); }
button.main-btn:active{ transform:scale(0.98); opacity:.9; }

/* ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤ (Updated Style) */
button.reduce-btn{ background: var(--card); color: var(--text); border: 2px solid var(--border); }
button.reduce-btn.active{ background: var(--warn-active); color: #000; border-color: var(--warn-active); animation: pulse 2s infinite; font-weight: bold;}

@keyframes pulse { 
    0% { box-shadow: 0 0 0 0 rgba(255, 149, 0, 0.4); }
    70% { box-shadow: 0 0 0 10px rgba(255, 149, 0, 0); }
    100% { box-shadow: 0 0 0 0 rgba(255, 149, 0, 0); }
}

/* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• */
#resultBox{ margin-top:20px; padding:20px; border-radius:16px; background:var(--card); border:1px solid var(--border); font-size:16px; line-height:1.6; min-height: 100px; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }

/* Layout ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô */
.schedule-container { width: 100%; text-align: left; }
.schedule-row { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border); padding: 12px 0; }
.schedule-row:last-child { border-bottom: none; }
.time-col { width: 35%; font-weight: bold; color: var(--btn); font-size: 15px; display: flex; flex-direction: column; }
.time-col span { font-size: 12px; color: var(--sub); font-weight: normal; }
.info-col { width: 65%; padding-left: 10px; }
.subject-name { font-weight: 600; display: block; line-height: 1.3; }
.room-name { font-size: 13px; color: var(--sub); margin-top: 4px; display: inline-block; background: var(--bg); padding: 2px 6px; border-radius: 4px; border: 1px solid var(--border); }
</style>
</head>

<body>

<button id="modeToggle" onclick="toggleMode()">üåó</button>

<h2>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô MR.2/1</h2>
<div id="time">Loading...</div>

<button id="btnReduce" class="main-btn reduce-btn" onclick="toggleReduce()">‚ö†Ô∏è ‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡∏õ‡∏¥‡∏î)</button>

<button class="main-btn" onclick="currentClass()">üìå ‡∏Ñ‡∏≤‡∏ö‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏∞‡πÑ‡∏£</button>
<button class="main-btn" onclick="nextClass()">‚û°Ô∏è ‡∏Ñ‡∏≤‡∏ö‡∏ï‡πà‡∏≠‡πÑ‡∏õ</button>
<button class="main-btn" onclick="breakTime()">‚è≥ ‡∏≠‡∏µ‡∏Å‡∏Å‡∏µ‡πà‡∏ô‡∏≤‡∏ó‡∏µ‡πÄ‡∏•‡∏¥‡∏Å/‡∏û‡∏±‡∏Å</button>
<button class="main-btn" onclick="showSchedule()">üìã ‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</button>

<div id="resultBox">‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>

<script>
/* ===== ‡πÇ‡∏´‡∏°‡∏î‡∏™‡∏ß‡πà‡∏≤‡∏á/‡∏°‡∏∑‡∏î ===== */
function toggleMode(){
    document.body.classList.toggle("dark");
    localStorage.setItem("theme",document.body.classList.contains("dark")?"dark":"light");
}
if(localStorage.getItem("theme")==="dark"){ document.body.classList.add("dark"); }

/* ===== ‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏ó‡∏¢ ===== */
function thaiTime(){
    const d=new Date();
    const days=["‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå","‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå","‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£","‡∏û‡∏∏‡∏ò","‡∏û‡∏§‡∏´‡∏±‡∏™","‡∏®‡∏∏‡∏Å‡∏£‡πå","‡πÄ‡∏™‡∏≤‡∏£‡πå"];
    return `${days[d.getDay()]} ${d.getDate()}/${d.getMonth()+1}/${d.getFullYear()+543} - ${d.toLocaleTimeString("th-TH")}`;
}
setInterval(()=>document.getElementById("time").innerText = thaiTime(),1000);

/* ===== ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ï‡∏≤‡∏°‡∏†‡∏≤‡∏û‡∏à‡∏£‡∏¥‡∏á) ===== */
const scheduleData={
    // ‡∏ß‡∏±‡∏ô‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£
    2: [
        {start:"08:40", end:"10:20", name:"‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô‡∏ä‡πà‡∏≤‡∏á‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏° (EDL)", room:"1051 (EDL) - ‡∏≠.REYNALYN"},
        {start:"12:50", end:"13:40", name:"‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô‡∏ä‡πà‡∏≤‡∏á‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏° (EDL)", room:"1053 (EDL) - ‡∏≠.SOPHIE"},
        {start:"14:30", end:"15:20", name:"‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°", room:"1221 - ‡∏≠.‡∏ô‡∏û‡∏£‡∏±‡∏ï‡∏ô‡πå"}
    ],
    // ‡∏ß‡∏±‡∏ô‡∏û‡∏∏‡∏ò
    3: [
        {start:"08:40", end:"12:00", name:"‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏°‡∏≠‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÑ‡∏ü‡∏ü‡πâ‡∏≤", room:"642 - ‡∏≠.‡∏™‡∏∏‡∏£‡πÄ‡∏î‡∏ä/‡∏≠.‡∏õ‡∏¥‡∏¢‡∏∞"},
        {start:"12:50", end:"13:40", name:"‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ä‡∏≤‡∏ä‡∏µ‡∏û 1", room:"432 - ‡∏≠.‡∏†‡∏≤‡∏ì‡∏∏‡∏ß‡∏±‡∏í‡∏ô‡πå"},
        {start:"14:30", end:"15:20", name:"‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô‡∏ä‡πà‡∏≤‡∏á‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏° (EDL)", room:"1051 (EDL) - ‡∏≠.REYNALYN"}
    ],
    // ‡∏ß‡∏±‡∏ô‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ
    4: [
        {start:"08:40", end:"09:30", name:"‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏ä‡∏≤‡∏ï‡∏¥‡πÑ‡∏ó‡∏¢", room:"1221 - ‡∏≠.‡∏õ‡∏ì‡∏ì‡∏£‡∏±‡∏Å‡∏©‡πå"},
        {start:"12:50", end:"16:10", name:"‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô", room:"424 - TA.‡∏≠‡∏±‡∏°‡∏£‡∏¥‡∏ô‡∏ó‡∏£‡πå/‡∏≠.‡∏õ‡∏£‡∏∞‡∏Å‡∏¥‡∏ï"}
    ],
    // ‡∏ß‡∏±‡∏ô‡∏®‡∏∏‡∏Å‡∏£‡πå
    5: [
        {start:"08:40", end:"12:00", name:"‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏•‡πÉ‡∏ô‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏Ñ‡∏Ñ‡∏≤‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå", room:"544 - TA.‡∏à‡∏¥‡∏£‡∏ô‡∏±‡∏ô‡∏ó‡πå/‡∏≠.‡∏£‡∏±‡∏ï‡∏ô‡∏®‡∏¥‡∏£‡∏¥"},
        {start:"13:40", end:"16:10", name:"‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô‡∏ä‡πà‡∏≤‡∏á‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏° (EDL)", room:"1051 (EDL) - ‡∏≠.SOPHIE"}
    ],
    // ‡∏ß‡∏±‡∏ô‡πÄ‡∏™‡∏≤‡∏£‡πå
    6: [
        {start:"08:40", end:"09:30", name:"‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏¢‡∏±‡πà‡∏á‡∏¢‡∏∑‡∏ô", room:"223 - ‡∏≠.‡∏®‡∏¥‡∏£‡∏¥‡∏ß‡∏£‡∏£‡∏ì"},
        {start:"12:50", end:"16:10", name:"‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏£‡∏Å‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô", room:"1323 (‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥ IOT) - TA.‡∏®‡∏∏‡∏†‡∏™‡∏¥‡∏ô"}
    ]
};

/* ===== ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ (Mapper: ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏†‡∏≤‡∏û Reduced Table ‡πÄ‡∏õ‡πä‡∏∞‡πÜ) ===== */
const timeMap = {
    // ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ä‡πâ‡∏≤
    "08:40": "08:40", 
    "09:30": "09:20",
    "10:20": "10:00",
    "11:10": "10:40",
    "12:00": "11:20", // ‡∏à‡∏ö‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏ä‡πâ‡∏≤ (‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤)
    
    // ‡∏ä‡πà‡∏ß‡∏á‡∏ö‡πà‡∏≤‡∏¢ (‡πÉ‡∏ô‡∏†‡∏≤‡∏û‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤ ‡∏Ñ‡∏≤‡∏ö 6 ‡πÄ‡∏£‡∏¥‡πà‡∏° 12:00)
    "12:50": "12:00", // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ñ‡∏≤‡∏ö‡∏ö‡πà‡∏≤‡∏¢ (‡∏õ‡∏Å‡∏ï‡∏¥ 12:50 -> ‡∏•‡∏î 12:00)
    "13:40": "12:40",
    "14:30": "13:20",
    "15:20": "14:00",
    "16:10": "14:40"  // ‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤)
};

/* ===== ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÇ‡∏´‡∏°‡∏î‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤ ===== */
let isReducedMode = false;

function toggleReduce() {
    isReducedMode = !isReducedMode;
    const btn = document.getElementById("btnReduce");
    if(isReducedMode) {
        btn.innerHTML = "‚ö° ‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà)";
        btn.classList.add("active");
        show("‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤ 40 ‡∏ô‡∏≤‡∏ó‡∏µ/‡∏Ñ‡∏≤‡∏ö \n‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ñ‡∏π‡∏Å‡∏õ‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥!");
    } else {
        btn.innerHTML = "‚ö†Ô∏è ‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡∏õ‡∏¥‡∏î)";
        btn.classList.remove("active");
        show("‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥ (50 ‡∏ô‡∏≤‡∏ó‡∏µ)");
    }
}

/* ===== ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏î‡∏∂‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á (Mapping Logic) ===== */
function getSchedule(dayIdx) {
    if (!scheduleData[dayIdx]) return null;
    if (!isReducedMode) return scheduleData[dayIdx]; // ‡∏ñ‡πâ‡∏≤‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥

    // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î ‡πÉ‡∏´‡πâ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏ß‡∏•‡∏≤ start/end ‡∏ú‡πà‡∏≤‡∏ô timeMap
    return scheduleData[dayIdx].map(item => {
        return {
            ...item,
            start: timeMap[item.start] || item.start,
            end: timeMap[item.end] || item.end
        };
    });
}

/* ===== Utilities ===== */
function toMin(t){let[h,m]=t.split(":");return +h*60+ +m;}
function nowMin(){let d=new Date();return d.getHours()*60+d.getMinutes();}

let timer=null;
function countdown(targetMin,text){
    clearInterval(timer);
    const update = () => {
        let now=nowMin();
        let diff=targetMin-now;
        if(diff<=0){
            clearInterval(timer);
            document.getElementById("resultBox").innerText = "‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤ / ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏≤‡∏ö‡πÅ‡∏•‡πâ‡∏ß";
            return;
        }
        let h=Math.floor(diff/60), m=diff%60;
        document.getElementById("resultBox").innerHTML = 
            `<strong>${text}</strong><br><br><span style="color:var(--btn); font-size:1.2em; font-weight:bold;">‚è≥ ‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${h > 0 ? h + ' ‡∏ä‡∏°. ' : ''}${m} ‡∏ô‡∏≤‡∏ó‡∏µ</span>`;
    };
    update();
    timer=setInterval(update,1000);
}

function findNextDay(d){
    for(let i=1;i<=7;i++){
        let nd=(d+i)%7;
        if(scheduleData[nd]) return nd;
    }
}

/* ===== ‡∏õ‡∏∏‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å ===== */
function currentClass(){
    const d=new Date().getDay(), n=nowMin();
    const sch = getSchedule(d);
    if(!sch) return nextAvailableDay("‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô");

    for(const c of sch){
        if(n>=toMin(c.start) && n<toMin(c.end)){
            countdown(toMin(c.end),
            `üìå ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (${isReducedMode?'‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤':'‡∏õ‡∏Å‡∏ï‡∏¥'}):<br>${c.name}<br>${c.room}`);
            return;
        }
    }
    show("‚è≥ ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≤‡∏ö‡∏ß‡πà‡∏≤‡∏á / ‡∏û‡∏±‡∏Å");
}

function nextClass(){
    const d=new Date().getDay(), n=nowMin();
    const sch = getSchedule(d);
    if(!sch) return nextAvailableDay("‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô");

    for(const c of sch){
        if(toMin(c.start)>n){
            countdown(toMin(c.start),
            `‚û°Ô∏è ‡∏Ñ‡∏≤‡∏ö‡∏ï‡πà‡∏≠‡πÑ‡∏õ (${isReducedMode?'‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤':'‡∏õ‡∏Å‡∏ï‡∏¥'}):<br>${c.name}<br>${c.room}`);
            return;
        }
    }
    nextAvailableDay("‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡πÅ‡∏•‡πâ‡∏ß");
}

function breakTime(){
    const d=new Date().getDay(), n=nowMin();
    const sch = getSchedule(d);
    if(!sch) return nextAvailableDay("‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô");
    
    for(const c of sch){
        if(n>=toMin(c.start) && n<toMin(c.end)){
            countdown(toMin(c.end), `üìö ‡πÄ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏≤‡∏ö‡∏ô‡∏µ‡πâ (${c.name})`);
            return;
        }
    }
    for(const c of sch){
        if(toMin(c.start)>n){
            countdown(toMin(c.start), `‚òï ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏û‡∏±‡∏Å (‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ô)`);
            return;
        }
    }
    show("‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô‡πÑ‡∏î‡πâ! üè†");
}

function showSchedule(){
    clearInterval(timer);
    const d=new Date().getDay();
    const sch = getSchedule(d);
    if(!sch) return nextAvailableDay("‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô");
    
    let html = `<div style="width:100%;">`;
    html += `<h3 style="margin:0 0 15px; color:var(--text);">üìÖ ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ ${isReducedMode?'(‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤) ‚ö°':''}</h3>`;
    html += `<div class="schedule-container">`;

    sch.forEach(c=>{
        html += `
        <div class="schedule-row">
            <div class="time-col">
                ${c.start}
                <span>‡∏ñ‡∏∂‡∏á ${c.end}</span>
            </div>
            <div class="info-col">
                <span class="subject-name">${c.name}</span>
                <span class="room-name">${c.room}</span>
            </div>
        </div>`;
    });

    html += `</div></div>`;
    document.getElementById("resultBox").innerHTML = html;
}

function nextAvailableDay(msg){
    let d=new Date().getDay();
    let next=findNextDay(d);
    let schNext = getSchedule(next); 
    if (!schNext) { show(msg); return; } // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô error ‡∏ñ‡πâ‡∏≤‡∏ß‡∏±‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á

    let first=schNext[0];
    const daysTh = ["‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå","‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå","‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£","‡∏û‡∏∏‡∏ò","‡∏û‡∏§‡∏´‡∏±‡∏™","‡∏®‡∏∏‡∏Å‡∏£‡πå","‡πÄ‡∏™‡∏≤‡∏£‡πå"];
    
    show(`${msg}\n\n‚û°Ô∏è ‡πÄ‡∏à‡∏≠‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ‡∏ß‡∏±‡∏ô${daysTh[next]}\n‡∏ß‡∏¥‡∏ä‡∏≤ ${first.name}\n‡πÄ‡∏£‡∏¥‡πà‡∏° ${first.start}`);
}

function show(t){
    clearInterval(timer);
    document.getElementById("resultBox").innerText = t;
}
</script>

</body>
</html>
